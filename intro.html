<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>LLET'S SPLIT – Intro</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
  @font-face {
    font-family: 'Baukasten';
    src: url('fonts/Baukasten Six Regular.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
  }

  body {
    background: #A54EFF;
    color: #FFF685;
    text-transform: uppercase;
    font-family: 'Baukasten', sans-serif;
    letter-spacing: 1px;
  }

  .btn {
    display: block;
    width: 100%;
    text-align: center;
    padding: 16px;
    border-radius: 12px;
    background: #FFF685;
    color: #A54EFF;
    font-family: 'Baukasten', sans-serif;
    font-size: 1.2rem;
    font-weight: bold;
    margin-top: 24px;
  }

  .btn:active {
    transform: scale(0.97);
  }
</style>

</head>
<body class="min-h-screen flex flex-col px-6 pt-10">

<!-- HEADER -->
<div class="text-center text-3xl mb-10">LLET'S SPLIT</div>

<!-- UITLEG -->
<div class="text-center text-lg leading-7 mb-10">
  MET LLET'S SPLIT KUN JE <br>
  RONDES MET JE VRIENDEN <br>
  EERLIJK VERDELEN. <br><br>
  JE HEBT HIERVOOR DE <br>
  NFC-STICKER NODIG DIE JE <br>
  BIJ DE INGANG HEBT GEKREGEN.
</div>

<!-- BUTTON -->
<button id="scanBtn" class="btn">
  SCAN MIJN CHIP
</button>

<!-- LOADING -->
<div id="loading" class="hidden text-center mt-6 text-xl">
  BEZIG...
</div>

<script>
  // ——— AUTO-SKIP ALS NAAM AL BEKEND IS ———
  const localName = localStorage.getItem("scannerName");
  if (localName && localName.trim() !== "") {
    window.location.href = "lowlandsintegratie.html";
  }

  const scanBtn = document.getElementById("scanBtn");
  const loading = document.getElementById("loading");

  scanBtn.onclick = async () => {
    if (!("NDEFReader" in window)) {
      alert("JE TELEFOON ONDERSTEUNT GEEN NFC.");
      return;
    }

    loading.classList.remove("hidden");
    scanBtn.classList.add("hidden");

    try {
      const reader = new NDEFReader();
      await reader.scan();

      reader.onreading = event => {
        const chipId = event.serialNumber || "";

        if (!chipId) {
          alert("GEEN CHIP GEVONDEN. PROBEER OPNIEUW.");
          loading.classList.add("hidden");
          scanBtn.classList.remove("hidden");
          return;
        }

        // Redirect naar integratie
        window.location.href = `lowlandsintegratie.html?chipId=${encodeURIComponent(chipId)}`;
      };

    } catch (error) {
      console.error(error);
      alert("SCAN MISLUKT. PROBEER NOGMAALS.");
      loading.classList.add("hidden");
      scanBtn.classList.remove("hidden");
    }
  };
</script>

</body>
</html>

