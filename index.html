<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Lowlands Scan</title>
</head>
<body>
<script>
  const apiUrl = "https://script.google.com/macros/s/AKfycbzYYy8v9JwosKehMYOAH6nZumg9l1x2QnC1mdwGlkFBmPnUbYU_Qt5WctGjeriXYtStAA/exec";

  // Chiphoudernaam ophalen of vragen
  let chipOwner = localStorage.getItem("chipOwner");
  if (!chipOwner) {
    chipOwner = prompt("Wat is jouw naam als chiphouder?");
    if (chipOwner) {
      localStorage.setItem("chipOwner", chipOwner);
    } else {
      alert("Naam chiphouder is verplicht!");
      throw new Error("Geen chiphoudernaam ingevuld");
    }
  }

  // Scannernaam ophalen of vragen
  let scannerName = localStorage.getItem("scannerName");
  if (!scannerName) {
    scannerName = prompt(`Je scant nu de chip van ${chipOwner}. Wat is jouw naam?`);
    if (scannerName) {
      localStorage.setItem("scannerName", scannerName);
    } else {
      alert("Naam scanner is verplicht!");
      throw new Error("Geen scannernaam ingevuld");
    }
  }

  // Data naar Google Sheet sturen
  const fullUrl = `${apiUrl}?chipOwner=${encodeURIComponent(chipOwner)}&scanner=${encodeURIComponent(scannerName)}`;

  fetch(fullUrl, { method: "POST" })
    .then(res => res.text())
    .then(text => {
      alert(`Scan geregistreerd: ${text}`);
    })
    .catch(err => {
      console.error(err);
      alert("Fout bij registreren scan!");
    });
</script>
</body>
</html>
