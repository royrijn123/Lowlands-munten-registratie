<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NextDrink Drankjes Beheer</title>
<style>
body{font-family:Arial,sans-serif;background:#f4f4f4;margin:0;padding:20px;color:#333;}
h1{margin-bottom:20px;text-align:center;}
table{width:100%;border-collapse:collapse;margin-bottom:20px;}
th,td{padding:12px;border:1px solid #ccc;text-align:left;}
th{background:#7e22ce;color:#fff;}
input[type=text], input[type=number]{width:100%;padding:8px;box-sizing:border-box;}
button{padding:10px 16px;margin-top:10px;border:none;border-radius:6px;cursor:pointer;}
.primary{background:#7e22ce;color:#fff;}
.secondary{background:#f97316;color:#fff;}
.delete-btn{background:#ef4444;color:#fff;}
</style>
</head>
<body>

<h1>NextDrink Drankjes Beheer</h1>

<table id="drinksTable">
  <thead>
    <tr><th>Naam</th><th>Prijs (€)</th><th>Acties</th></tr>
  </thead>
  <tbody></tbody>
</table>

<h3>Nieuw drankje toevoegen</h3>
<input type="text" id="newDrinkName" placeholder="Naam">
<input type="number" id="newDrinkPrice" placeholder="Prijs (€)" step="0.01" min="0">
<button class="primary" onclick="addDrink()">Toevoegen</button>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbwW8-QL2zxIBhyy5NQGvmnhbX3Tm0cr7_71JJMfwy1Cad0jWCYyWyt18Qkny9gpksZG4w/exec";
let drinks = [];

async function loadDrinks(){
  try{
    drinks = await fetch(`${apiUrl}?action=getDrinks`).then(r=>r.json());
    renderTable();
  }catch(e){alert("Fout bij laden drankjes.");console.error(e);}
}

function renderTable(){
  const tbody = document.querySelector("#drinksTable tbody");
  tbody.innerHTML="";
  drinks.forEach((d,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td><input type="text" value="${d.name}" onchange="updateDrink(${i}, 'name', this.value)"></td>
      <td><input type="number" value="${d.price}" step="0.01" min="0" onchange="updateDrink(${i}, 'price', this.value)"></td>
      <td><button class="delete-btn" onclick="deleteDrink(${i})">Verwijder</button></td>
    `;
    tbody.appendChild(tr);
  });
}

async function saveDrinks(){
  try{
    await fetch(apiUrl,{
      method:"POST",
      body:new URLSearchParams({action:"setDrinks",drinks:JSON.stringify(drinks)})
    });
  }catch(e){alert("Fout bij opslaan drankjes.");console.error(e);}
}

function updateDrink(index, field, value){
  if(field==="name") drinks[index].name=value.trim();
  if(field==="price") drinks[index].price=parseFloat(value);
  saveDrinks();
}

function deleteDrink(index){
  if(!confirm(`Weet je zeker dat je "${drinks[index].name}" wilt verwijderen?`)) return;
  drinks.splice(index,1);
  renderTable();
  saveDrinks();
}

function addDrink(){
  const name=document.getElementById("newDrinkName").value.trim();
  const price=parseFloat(document.getElementById("newDrinkPrice").value);
  if(!name||isNaN(price)||price<=0){alert("Vul een geldige naam en prijs in!");return;}
  drinks.push({name,price});
  document.getElementById("newDrinkName").value="";
  document.getElementById("newDrinkPrice").value="";
  renderTable();
  saveDrinks();
}

// Initialisatie
loadDrinks();
</script>

</body>
</html>
